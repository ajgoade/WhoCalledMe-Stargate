Index: call-center-app/gcp-files/transcribe.py
===================================================================
--- call-center-app/gcp-files/transcribe.py	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
+++ call-center-app/gcp-files/transcribe.py	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
@@ -1,10 +0,0 @@
-import boto3
-
-session = boto3.Session(profile_name='fieldops')
-transcribe = session.client('transcribe')
-
-# transcribe job
-
-def create_job(mediafileurl,mediaformat,jobname):
-    response = transcribe.start_transcription_job( TranscriptionJobName=jobname, Media={'MediaFileUri': mediafileurl}, MediaFormat=mediaformat, LanguageCode="en-US", MediaSampleRateHertz=44100)
-    return print(f"Request submitted: {response['ResponseMetadata']['RequestId']}")
\ No newline at end of file
Index: call-center-app/gcp-files/load_transcript_astra.py
===================================================================
--- call-center-app/gcp-files/load_transcript_astra.py	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
+++ call-center-app/gcp-files/load_transcript_astra.py	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
@@ -1,46 +0,0 @@
-from cassandra.cluster import Cluster
-from cassandra.auth import PlainTextAuthProvider
-import boto3
-from datetime import datetime
-import requests
-
-# Connect to Astra and Run query
-
-print("Connecting to DataStax Astra ..... \n")
-cloud_config= {
-        'secure_connect_bundle': '/home/ec2-user/secure-connect-demo-db.zip'
-}
-auth_provider = PlainTextAuthProvider('username', 'password')
-cluster = Cluster(cloud=cloud_config, auth_provider=auth_provider)
-session = cluster.connect()
-
-# loading data
-print("Reading Data from Astra ..... \n")
-row = session.execute("select * from demo_callcentre.job_status where status='scheduled'")
-jobname = row[0].job_id
-
-awssession = boto3.Session(profile_name='fieldops')
-transcribe = awssession.client('transcribe')
-
-while True:
-    print(jobname)
-    status = transcribe.get_transcription_job(TranscriptionJobName=jobname)
-    if status['TranscriptionJob']['TranscriptionJobStatus'] in ['COMPLETED', 'FAILED']:
-        end = datetime.now()
-        break
-    print("Not ready yet...")
-    time.sleep(5)
-
-
-response = requests.get(status['TranscriptionJob']['Transcript']['TranscriptFileUri']).json()
-transcript = response['results']['transcripts'][0]['transcript']
-
-# Updating Astra Tables
-
-call_id = jobname.split("_")[0]
-session.execute(f'update demo_callcentre.call_centre_voice_source set last_updated=%s, transcript=%s, process_status=%s where call_id={call_id}',(datetime.now(),transcript,'Processed'))
-
-job_id = "'"+jobname+"'"
-session.execute(f'update demo_callcentre.job_status set last_update_time=%s, status=%s where job_id={job_id}',(datetime.now(),'completed'))
-
-print("Job Processed")
Index: .vscode/launch.json
===================================================================
--- .vscode/launch.json	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
+++ .vscode/launch.json	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
@@ -1,15 +0,0 @@
-{
-    // Use IntelliSense to learn about possible attributes.
-    // Hover to view descriptions of existing attributes.
-    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
-    "version": "0.2.0",
-    "configurations": [
-        {
-            "name": "Python: Current File",
-            "type": "python",
-            "request": "launch",
-            "program": "${file}",
-            "console": "integratedTerminal"
-        }
-    ]
-}
\ No newline at end of file
Index: call-center-app/gcp-files/scratch_code.txt
===================================================================
--- call-center-app/gcp-files/scratch_code.txt	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
+++ call-center-app/gcp-files/scratch_code.txt	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
@@ -1,3 +0,0 @@
-Dummy insert : 
-
-insert into call_centre_voice_source (call_id,call_s3_link,call_audio_filetype,process_status,created_time) values (a81c0e06-2484-4ebb-8b57-f35f900a3d08,'s3://astra-call-centre-app/T-Mobile Customer Service call.mp3','mp3','New','2020-08-20 16:05')
\ No newline at end of file
Index: call-center-app/gcp-files/data_model.cql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>CREATE KEYSPACE callcenter WITH replication = {'class': 'NetworkTopologyStrategy', 'caas-dc': '3'}  AND durable_writes = true;\n\nCREATE TABLE callcenter.job_status (\n    job_id text PRIMARY KEY,\n    last_update_time timestamp,\n    status text\n) WITH additional_write_policy = '99PERCENTILE'\n    AND bloom_filter_fp_chance = 0.01\n    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}\n    AND comment = ''\n    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}\n    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}\n    AND crc_check_chance = 1.0\n    AND default_time_to_live = 0\n    AND gc_grace_seconds = 864000\n    AND max_index_interval = 2048\n    AND memtable_flush_period_in_ms = 0\n    AND min_index_interval = 128\n    AND nodesync = {'enabled': 'true', 'incremental': 'true'}\n    AND read_repair = 'BLOCKING'\n    AND speculative_retry = '99PERCENTILE';\nCREATE CUSTOM INDEX status_idx ON callcenter.job_status (status) USING 'StorageAttachedIndex';\n\nCREATE TABLE callcenter.call_center_voice_source (\n    call_id uuid PRIMARY KEY,\n    call_audio_filetype text,\n    call_link text,\n    created_time timestamp,\n    last_updated timestamp,\n    process_status text,\n    transcript text\n) WITH additional_write_policy = '99PERCENTILE'\n    AND bloom_filter_fp_chance = 0.01\n    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}\n    AND comment = ''\n    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}\n    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}\n    AND crc_check_chance = 1.0\n    AND default_time_to_live = 0\n    AND gc_grace_seconds = 864000\n    AND max_index_interval = 2048\n    AND memtable_flush_period_in_ms = 0\n    AND min_index_interval = 128\n    AND nodesync = {'enabled': 'true', 'incremental': 'true'}\n    AND read_repair = 'BLOCKING'\n    AND speculative_retry = '99PERCENTILE';\nCREATE CUSTOM INDEX process_status_idx ON callcenter.call_centre_voice_source (process_status) USING 'StorageAttachedIndex';\nCREATE CUSTOM INDEX call_audio_filetype_idx ON callcenter.call_centre_voice_source (call_audio_filetype) USING 'StorageAttachedIndex';\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- call-center-app/gcp-files/data_model.cql	(revision f618e24130fd7425f9eb5c0924d2fcc9e27577d6)
+++ call-center-app/gcp-files/data_model.cql	(date 1598374577000)
@@ -1,31 +1,9 @@
 CREATE KEYSPACE callcenter WITH replication = {'class': 'NetworkTopologyStrategy', 'caas-dc': '3'}  AND durable_writes = true;
 
-CREATE TABLE callcenter.job_status (
-    job_id text PRIMARY KEY,
-    last_update_time timestamp,
-    status text
-) WITH additional_write_policy = '99PERCENTILE'
-    AND bloom_filter_fp_chance = 0.01
-    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}
-    AND comment = ''
-    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}
-    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}
-    AND crc_check_chance = 1.0
-    AND default_time_to_live = 0
-    AND gc_grace_seconds = 864000
-    AND max_index_interval = 2048
-    AND memtable_flush_period_in_ms = 0
-    AND min_index_interval = 128
-    AND nodesync = {'enabled': 'true', 'incremental': 'true'}
-    AND read_repair = 'BLOCKING'
-    AND speculative_retry = '99PERCENTILE';
-CREATE CUSTOM INDEX status_idx ON callcenter.job_status (status) USING 'StorageAttachedIndex';
-
 CREATE TABLE callcenter.call_center_voice_source (
-    call_id uuid PRIMARY KEY,
+    call_id timeuuid PRIMARY KEY,
     call_audio_filetype text,
     call_link text,
-    created_time timestamp,
     last_updated timestamp,
     process_status text,
     transcript text
@@ -44,5 +22,6 @@
     AND nodesync = {'enabled': 'true', 'incremental': 'true'}
     AND read_repair = 'BLOCKING'
     AND speculative_retry = '99PERCENTILE';
-CREATE CUSTOM INDEX process_status_idx ON callcenter.call_centre_voice_source (process_status) USING 'StorageAttachedIndex';
-CREATE CUSTOM INDEX call_audio_filetype_idx ON callcenter.call_centre_voice_source (call_audio_filetype) USING 'StorageAttachedIndex';
+    
+CREATE CUSTOM INDEX process_status_idx ON callcenter.call_center_voice_source (process_status) USING 'StorageAttachedIndex';
+CREATE CUSTOM INDEX call_audio_filetype_idx ON callcenter.call_center_voice_source (call_audio_filetype) USING 'StorageAttachedIndex';
